{"ast":null,"code":"import _toConsumableArray from \"/home/shreyas/Documents/DBMS Project GIT/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/shreyas/Documents/DBMS Project GIT/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/shreyas/Documents/DBMS Project GIT/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/shreyas/Documents/DBMS Project GIT/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/shreyas/Documents/DBMS Project GIT/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/shreyas/Documents/DBMS Project GIT/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/shreyas/Documents/DBMS Project GIT/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/shreyas/Documents/DBMS Project GIT/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/shreyas/Documents/DBMS Project GIT/DBMS-Project/supermarketUI/src/views/examples/Notification.jsx\";\n\n/*!\n\n=========================================================\n* Argon Dashboard React - v1.0.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React from \"react\";\nimport { connect } from \"react-redux\"; // reactstrap components\n\nimport firebase from '../../config/fbConfig';\nimport { Button, Card, CardHeader, CardBody, CardTitle, FormGroup, Form, Input, Container, Row, Col } from \"reactstrap\"; // core components\n\nimport UserHeader from \"components/Headers/UserHeader.jsx\";\n\nvar Notification =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Notification, _React$Component);\n\n  function Notification(props) {\n    var _this;\n\n    _classCallCheck(this, Notification);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Notification).call(this, props));\n\n    _this.disp = function () {\n      var list = _this.state.cardList;\n      return list.map(function (data, key) {\n        return React.createElement(Col, {\n          lg: \"6\",\n          xl: \"3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, React.createElement(Card, {\n          key: key,\n          id: data.id,\n          className: \"card-stats mb-4 mb-xl-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, React.createElement(CardBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(CardTitle, {\n          tag: \"h5\",\n          className: \"text-uppercase text-muted mb-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, data.name), React.createElement(\"span\", {\n          className: \"h2 font-weight-bold mb-0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, data.phoneno))), React.createElement(Button, {\n          color: \"primary\",\n          name: \"accept\",\n          id: data.id,\n          onClick: _this.handleClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, \"Accept\"), React.createElement(Button, {\n          color: \"red\",\n          id: data.id,\n          name: \"reject\",\n          onClick: _this.handleClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, \"Reject\"))));\n      });\n    };\n\n    _this.setL = function (data) {\n      _this.setState(_objectSpread({}, _this.state, {\n        cardList: [].concat(_toConsumableArray(_this.state.cardList), [data])\n      }));\n    };\n\n    _this.removeL = function (data) {\n      var list = _this.state.cardList;\n      var newList = list.filter(function (value) {\n        return value.phoneno !== data.phoneno;\n      });\n\n      _this.setState(_objectSpread({}, _this.state, {\n        cardList: newList\n      }));\n    };\n\n    _this.state = {\n      adminName: null,\n      employee: null,\n      cardList: []\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    console.log(props);\n    return _this;\n  }\n\n  _createClass(Notification, [{\n    key: \"handleClick\",\n    value: function handleClick(event) {\n      console.log(this.state);\n      var db = firebase.firestore();\n      var id = event.target.id;\n\n      if (event.target.name === 'reject') {\n        db.collection('argon').doc(id).delete();\n      } else if (event.target.name === 'accept') {\n        var list = this.state.cardList;\n        var data = list.find(function (ele) {\n          return ele.id === event.target.id;\n        });\n        console.log(data);\n        this.Submit(data);\n        db.collection('argon').doc(id).delete();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var setP = function setP(name) {\n        _this2.setState(_objectSpread({}, _this2.state, {\n          adminName: name\n        }));\n\n        console.log(_this2.state.adminName);\n        var db = firebase.firestore();\n        db.collection(\"argon\").onSnapshot(function (snap) {\n          var changes = snap.docChanges();\n          changes.forEach(function (change) {\n            _this2.renderCard(change);\n          });\n        });\n      };\n\n      var db = firebase.firestore();\n      db.collection(\"argon\").onSnapshot(function (snap) {\n        var changes = snap.docChanges();\n        changes.forEach(function (change) {\n          var data = change.doc.data();\n          data.id = change.doc.id;\n          if (change.type === 'added') _this2.setL(data);else if (change.type === 'removed') _this2.removeL(data);\n        });\n      });\n      console.log('hi');\n      var data = {\n        adminId: this.props.adminId\n      };\n      console.log(data);\n      fetch(\"/adminName\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(function (response) {\n        if (response.status >= 400) {\n          throw new Error(\"Bad response from server\");\n        }\n\n        return response.json();\n      }).then(function (data) {\n        if (data.status === \"success\") {\n          setP(data.name[0].name);\n          console.log(data.name[0].name);\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"Submit\",\n    value: function Submit(data) {\n      var _this3 = this;\n\n      var setEmp = function setEmp(data1) {\n        _this3.setState(_objectSpread({}, _this3.state, {\n          employee: data1.data[0]\n        }));\n\n        console.log(_this3.state.employee.empid);\n      };\n\n      fetch(\"/empreg\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(function (response) {\n        if (response.status >= 400) {\n          throw new Error(\"Bad response from server\");\n        }\n\n        return response.json();\n      }).then(function (data) {\n        if (data.status === \"success\") {\n          console.log(data.data[0]);\n          alert('successful');\n          setEmp(data);\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.props);\n      return React.createElement(React.Fragment, null, React.createElement(UserHeader, {\n        adminName: this.state.adminName,\n        count: this.state.cardList.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, this.disp()));\n    }\n  }]);\n\n  return Notification;\n}(React.Component);\n\nvar mapStateToProp = function mapStateToProp(state) {\n  console.log(state);\n  return {\n    adminId: state.adminid\n  };\n};\n\nexport default connect(mapStateToProp)(Notification);","map":{"version":3,"sources":["/home/shreyas/Documents/DBMS Project GIT/DBMS-Project/supermarketUI/src/views/examples/Notification.jsx"],"names":["React","connect","firebase","Button","Card","CardHeader","CardBody","CardTitle","FormGroup","Form","Input","Container","Row","Col","UserHeader","Notification","props","disp","list","state","cardList","map","data","key","id","name","phoneno","handleClick","setL","setState","removeL","newList","filter","value","adminName","employee","bind","console","log","event","db","firestore","target","collection","doc","delete","find","ele","Submit","setP","onSnapshot","snap","changes","docChanges","forEach","change","renderCard","type","adminId","fetch","method","headers","body","JSON","stringify","then","response","status","Error","json","catch","err","setEmp","data1","empid","alert","length","Component","mapStateToProp","adminid"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Argon Dashboard React - v1.0.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/argon-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/argon-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React from \"react\";\nimport {connect} from \"react-redux\";\n// reactstrap components\nimport firebase from '../../config/fbConfig'\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardTitle,\n  FormGroup,\n  Form,\n  Input,\n  Container,\n  Row,\n  Col\n} from \"reactstrap\";\n// core components\nimport UserHeader from \"components/Headers/UserHeader.jsx\";\n\nclass Notification extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      adminName: null,\n      employee : null,\n      cardList : []\n    }\n    this.handleClick = this.handleClick.bind(this)\n    console.log(props)\n  }\n  handleClick(event){\n    console.log(this.state)\n    const db = firebase.firestore()\n    let id = event.target.id\n   if (event.target.name === 'reject')\n   {\n\n    db.collection('argon').doc(id).delete();\n   }\n   else if (event.target.name === 'accept')\n   {\n     let list =this.state.cardList\n      let data = list.find((ele)=>{\n        return ele.id === event.target.id\n      })\n      console.log(data)\n      this.Submit(data)\n      db.collection('argon').doc(id).delete();\n\n\n   }\n  }\n  disp=()=>{\n    let list = this.state.cardList;\n    return list.map((data,key)=>{\n      return (\n        <Col lg=\"6\" xl=\"3\">\n                  <Card key={key} id={data.id} className=\"card-stats mb-4 mb-xl-0\">\n                    <CardBody>\n                      <Row>\n                        <div className=\"col\">\n                          <CardTitle\n                            tag=\"h5\"\n                            className=\"text-uppercase text-muted mb-0\"\n                          >\n                            {data.name}\n                          </CardTitle>\n                          <span className=\"h2 font-weight-bold mb-0\">\n                            {data.phoneno}\n                          </span>\n                        </div>\n                        \n                      </Row>\n                      <Button\n                  color=\"primary\"\n                  name = \"accept\"\n                  id = {data.id}\n                  onClick ={this.handleClick}\n                >\n                  Accept\n                </Button >\n                <Button\n                  color=\"red\"\n                  id = {data.id}\n                  name = \"reject\"\n                  onClick ={this.handleClick}\n                >\n                  Reject\n                </Button >\n                    </CardBody>\n                  </Card>\n                </Col>\n      )\n  \n    })\n  }\n  setL=(data)=>{\n    this.setState ({\n      ...this.state,\n      cardList:[\n        ...this.state.cardList,\n        data\n      ]\n    })\n  }\n  removeL = (data)=>{\n    let list = this.state.cardList\n    let newList = list.filter(function(value){\n      return value.phoneno !== data.phoneno\n    })\n\n    this.setState({\n      ...this.state,\n      cardList : newList\n    })\n  }\n  componentDidMount(){\n    const setP=(name)=>{\n      this.setState ({\n        ...this.state,\n        adminName : name\n      })\n    \n\n      console.log(this.state.adminName)\n      const db = firebase.firestore();\n\n    db.collection(\"argon\")\n    .onSnapshot((snap) => {\n      const changes = snap.docChanges();\n      changes.forEach((change) => {\n          this.renderCard(change)\n      })\n    })\n    }\n    const db = firebase.firestore();\n\n    db.collection(\"argon\")\n    .onSnapshot((snap) => {\n      const changes = snap.docChanges();\n    \n      changes.forEach((change) =>{\n      const data = change.doc.data()\n      data.id = change.doc.id\n      if (change.type === 'added')\n      this.setL(data)\n      else if (change.type === 'removed')\n      this.removeL(data)\n      })\n    })\n\n    console.log('hi')\n    const data = {adminId :this.props.adminId}      \n    console.log(data)\n    fetch(\"/adminName\", {\n        method: 'POST',\n        headers: {\n        'Content-Type': 'application/json'},\n        body: JSON.stringify(data) \n        })\n        .then(function(response) {\n          if (response.status >= 400) {\n            throw new Error(\"Bad response from server\");\n          }\n          return response.json();\n        })\n        .then(function(data){         \n        if(data.status === \"success\"){\n          setP(data.name[0].name)\n          console.log(data.name[0].name)\n        }\n        }).catch(function(err) {\n        console.log(err)\n        });\n  }\n    \n  Submit(data){\n      \n      const setEmp=(data1)=>{\n          this.setState({\n            ...this.state,\n            employee:data1.data[0]\n          })\n          console.log(this.state.employee.empid)\n      }\n      fetch(\"/empreg\", {\n        method: 'POST',\n        headers: {\n        'Content-Type': 'application/json'},\n        body: JSON.stringify(data) \n        })\n        .then(function(response) {\n          if (response.status >= 400) {\n            throw new Error(\"Bad response from server\");\n          }\n          return response.json();\n        })\n        .then(function(data){         \n        if(data.status === \"success\"){\n          console.log(data.data[0])\n          alert('successful')\n          setEmp(data)\n        }\n        }).catch(function(err) {\n        console.log(err)\n        });\n    }\n\n  render() {\n    console.log(this.props)\n    return (\n      <>\n        <UserHeader adminName={this.state.adminName} count ={this.state.cardList.length}/>\n        {/* Page content */}\n        <Row>\n        {this.disp()}\n        </Row>\n      </>\n    );\n   \n  }\n}\nconst mapStateToProp=(state)=>{\n  console.log(state)\n  return {\n    adminId : state.adminid\n  }\n}\nexport default connect(mapStateToProp)(Notification);\n"]},"metadata":{},"sourceType":"module"}