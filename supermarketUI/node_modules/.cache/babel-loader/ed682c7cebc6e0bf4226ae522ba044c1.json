{"ast":null,"code":"import _toConsumableArray from \"/home/sathvik/Desktop/Argon/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/sathvik/Desktop/Argon/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sathvik/Desktop/Argon/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/sathvik/Desktop/Argon/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/sathvik/Desktop/Argon/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/sathvik/Desktop/Argon/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/sathvik/Desktop/Argon/DBMS-Project/supermarketUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/sathvik/Desktop/Argon/DBMS-Project/supermarketUI/src/views/examples/Sketch.jsx\";\nimport React, { Component, PropTypes } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { Pencil } from '../../tools/pencil'; // export const toolsMap = {\n//   [TOOL_PENCIL]: Pencil,\n//   [TOOL_LINE]: Line,\n//   [TOOL_RECTANGLE]: Rectangle,\n//   [TOOL_ELLIPSE]: Ellipse\n// };\n\nvar Sketch =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Sketch, _Component);\n\n  function Sketch(props) {\n    var _this;\n\n    _classCallCheck(this, Sketch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Sketch).call(this, props));\n    _this.tool = null;\n    _this.interval = null;\n    _this.initTool = _this.initTool.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onMouseDown = _this.onMouseDown.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onMouseMove = _this.onMouseMove.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDebouncedMove = _this.onDebouncedMove.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onMouseUp = _this.onMouseUp.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Sketch, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.canvas = findDOMNode(this.canvasRef);\n      this.ctx = this.canvas.getContext('2d');\n      this.initTool(this.props.tool);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(_ref) {\n      var _this2 = this;\n\n      var tool = _ref.tool,\n          items = _ref.items;\n      items.filter(function (item) {\n        return _this2.props.items.indexOf(item) === -1;\n      }).forEach(function (item) {\n        _this2.initTool(item.tool);\n\n        _this2.tool.draw(item, _this2.props.animate);\n      });\n      this.initTool(tool);\n    }\n  }, {\n    key: \"initTool\",\n    value: function initTool(tool) {\n      this.tool = this.props.toolsMap[tool](this.ctx);\n    }\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown(e) {\n      var _this$tool;\n\n      var data = (_this$tool = this.tool).onMouseDown.apply(_this$tool, _toConsumableArray(this.getCursorPosition(e)).concat([this.props.color, this.props.size, this.props.fillColor]));\n\n      data && data[0] && this.props.onItemStart && this.props.onItemStart.apply(null, data);\n\n      if (this.props.onDebouncedItemChange) {\n        this.interval = setInterval(this.onDebouncedMove, this.props.debounceTime);\n      }\n    }\n  }, {\n    key: \"onDebouncedMove\",\n    value: function onDebouncedMove() {\n      if (typeof this.tool.onDebouncedMouseMove == 'function' && this.props.onDebouncedItemChange) {\n        this.props.onDebouncedItemChange.apply(null, this.tool.onDebouncedMouseMove());\n      }\n    }\n  }, {\n    key: \"onMouseMove\",\n    value: function onMouseMove(e) {\n      var _this$tool2;\n\n      var data = (_this$tool2 = this.tool).onMouseMove.apply(_this$tool2, _toConsumableArray(this.getCursorPosition(e)));\n\n      data && data[0] && this.props.onEveryItemChange && this.props.onEveryItemChange.apply(null, data);\n    }\n  }, {\n    key: \"onMouseUp\",\n    value: function onMouseUp(e) {\n      var _this$tool3;\n\n      var data = (_this$tool3 = this.tool).onMouseUp.apply(_this$tool3, _toConsumableArray(this.getCursorPosition(e)));\n\n      data && data[0] && this.props.onCompleteItem && this.props.onCompleteItem.apply(null, data);\n\n      if (this.props.onDebouncedItemChange) {\n        clearInterval(this.interval);\n        this.interval = null;\n      }\n    }\n  }, {\n    key: \"getCursorPosition\",\n    value: function getCursorPosition(e) {\n      var _this$canvas$getBound = this.canvas.getBoundingClientRect(),\n          top = _this$canvas$getBound.top,\n          left = _this$canvas$getBound.left;\n\n      return [e.clientX - left, e.clientY - top];\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          width = _this$props.width,\n          height = _this$props.height,\n          canvasClassName = _this$props.canvasClassName;\n      return React.createElement(\"canvas\", {\n        ref: function ref(canvas) {\n          _this3.canvasRef = canvas;\n        },\n        className: canvasClassName,\n        onMouseDown: this.onMouseDown,\n        onMouseMove: this.onMouseMove,\n        onMouseOut: this.onMouseUp,\n        onMouseUp: this.onMouseUp,\n        width: width,\n        height: height,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Sketch;\n}(Component);\n\nSketch.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  items: PropTypes.array.isRequired,\n  animate: PropTypes.bool,\n  canvasClassName: PropTypes.string,\n  color: PropTypes.string,\n  fillColor: PropTypes.string,\n  size: PropTypes.number,\n  tool: PropTypes.string,\n  toolsMap: PropTypes.object,\n  onItemStart: PropTypes.func,\n  // function(stroke:Stroke) { ... }\n  onEveryItemChange: PropTypes.func,\n  // function(idStroke:string, x:number, y:number) { ... }\n  onDebouncedItemChange: PropTypes.func,\n  // function(idStroke, points:Point[]) { ... }\n  onCompleteItem: PropTypes.func,\n  // function(stroke:Stroke) { ... }\n  debounceTime: PropTypes.number\n};\nSketch.defaultProps = {\n  width: 500,\n  height: 500,\n  color: '#000',\n  size: 5,\n  fillColor: '',\n  canvasClassName: 'canvas',\n  debounceTime: 1000,\n  animate: true,\n  tool: pencil // toolsMap\n\n};\nexport default Sketch;","map":{"version":3,"sources":["/home/sathvik/Desktop/Argon/DBMS-Project/supermarketUI/src/views/examples/Sketch.jsx"],"names":["React","Component","PropTypes","findDOMNode","Pencil","Sketch","props","tool","interval","initTool","bind","onMouseDown","onMouseMove","onDebouncedMove","onMouseUp","canvas","canvasRef","ctx","getContext","items","filter","item","indexOf","forEach","draw","animate","toolsMap","e","data","getCursorPosition","color","size","fillColor","onItemStart","apply","onDebouncedItemChange","setInterval","debounceTime","onDebouncedMouseMove","onEveryItemChange","onCompleteItem","clearInterval","getBoundingClientRect","top","left","clientX","clientY","width","height","canvasClassName","propTypes","number","array","isRequired","bool","string","object","func","defaultProps","pencil"],"mappings":"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","sourcesContent":["import React, {Component, PropTypes} from 'react';\nimport { findDOMNode } from 'react-dom'\nimport { Pencil } from '../../tools/pencil'\n\n// export const toolsMap = {\n//   [TOOL_PENCIL]: Pencil,\n//   [TOOL_LINE]: Line,\n//   [TOOL_RECTANGLE]: Rectangle,\n//   [TOOL_ELLIPSE]: Ellipse\n// };\n\nclass Sketch extends Component {\n\n  tool = null;\n  interval = null;\n\n  static propTypes = {\n    width: PropTypes.number,\n    height: PropTypes.number,\n    items: PropTypes.array.isRequired,\n    animate: PropTypes.bool,\n    canvasClassName: PropTypes.string,\n    color: PropTypes.string,\n    fillColor: PropTypes.string,\n    size: PropTypes.number,\n    tool: PropTypes.string,\n    toolsMap: PropTypes.object,\n    onItemStart: PropTypes.func, // function(stroke:Stroke) { ... }\n    onEveryItemChange: PropTypes.func, // function(idStroke:string, x:number, y:number) { ... }\n    onDebouncedItemChange: PropTypes.func, // function(idStroke, points:Point[]) { ... }\n    onCompleteItem: PropTypes.func, // function(stroke:Stroke) { ... }\n    debounceTime: PropTypes.number,\n  };\n\n  static defaultProps = {\n    width: 500,\n    height: 500,\n    color: '#000',\n    size: 5,\n    fillColor: '',\n    canvasClassName: 'canvas',\n    debounceTime: 1000,\n    animate: true,\n    tool: pencil\n    // toolsMap\n  };\n\n  constructor(props) {\n    super(props);\n    this.initTool = this.initTool.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onDebouncedMove = this.onDebouncedMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n  }\n\n  componentDidMount() {\n    this.canvas = findDOMNode(this.canvasRef);\n    this.ctx = this.canvas.getContext('2d');\n    this.initTool(this.props.tool);\n  }\n\n  componentWillReceiveProps({tool, items}) {\n    items\n      .filter(item => this.props.items.indexOf(item) === -1)\n      .forEach(item => {\n        this.initTool(item.tool);\n        this.tool.draw(item, this.props.animate);\n      });\n    this.initTool(tool);\n  }\n\n  initTool(tool) {\n    this.tool = this.props.toolsMap[tool](this.ctx);\n  }\n\n  onMouseDown(e) {\n    const data = this.tool.onMouseDown(...this.getCursorPosition(e), this.props.color, this.props.size, this.props.fillColor);\n    data && data[0] && this.props.onItemStart && this.props.onItemStart.apply(null, data);\n    if (this.props.onDebouncedItemChange) {\n      this.interval = setInterval(this.onDebouncedMove, this.props.debounceTime);\n    }\n  }\n\n  onDebouncedMove() {\n    if (typeof this.tool.onDebouncedMouseMove == 'function' && this.props.onDebouncedItemChange) {\n      this.props.onDebouncedItemChange.apply(null, this.tool.onDebouncedMouseMove());\n    }\n  }\n\n  onMouseMove(e) {\n    const data = this.tool.onMouseMove(...this.getCursorPosition(e));\n    data && data[0] && this.props.onEveryItemChange && this.props.onEveryItemChange.apply(null, data);\n  }\n\n  onMouseUp(e) {\n    const data = this.tool.onMouseUp(...this.getCursorPosition(e));\n    data && data[0] && this.props.onCompleteItem && this.props.onCompleteItem.apply(null, data);\n    if (this.props.onDebouncedItemChange) {\n      clearInterval(this.interval);\n      this.interval = null;\n    }\n  }\n\n  getCursorPosition(e) {\n    const {top, left} = this.canvas.getBoundingClientRect();\n    return [\n      e.clientX - left,\n      e.clientY - top\n    ];\n  }\n\n  render() {\n    const {width, height, canvasClassName} = this.props;\n    return (\n      <canvas\n        ref={(canvas) => { this.canvasRef = canvas; }}\n        className={canvasClassName}\n        onMouseDown={this.onMouseDown}\n        onMouseMove={this.onMouseMove}\n        onMouseOut={this.onMouseUp}\n        onMouseUp={this.onMouseUp}\n        width={width}\n        height={height}\n      />\n    )\n  }\n}\nexport default Sketch;"]},"metadata":{},"sourceType":"module"}